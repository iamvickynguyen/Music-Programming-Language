# Synthtax - a small music programming language

Synthtax is a small, typed, imperative music programming language designed for creating and manipulating sound. This minimal language is able to supports some programming constructs such as loops, conditionals, and function calls. Synthtax provides a mechanism to generate and modify sound, specifically, oscillators and ADSR. The language is implemented as a C++ transpiler using the C++ programming language and ANTLR.

## Grammar and Syntax

Synthtax has a relatively simple grammar and syntax. Here are some of the key features of the language:

...TODO...

## How to run

0. Require `libsndfile` to write a `.wav` file (see [github.com/libsndfile](https://github.com/libsndfile/libsndfile))
1. `./generate.sh` : generate lexer, parser, visitor classes
2. `cmake -S ./ -B build` : create build
3. `cd build; make` : compile and link
4. `./synthtax <filename>` : run the file

At this point, you will get an `output.cpp` file. Do `cd ..` to the project base directory to see the file.

Compile `outfile.cpp` with your favourite C++ compiler. If you have `write_to_file()` function in `output.cpp` (i.e., if you want to write to a `.wav` file), you need to add `-lsndfile` flag to link with the `libsndfile` library. I will figure out how to link `libsndfile` in CMake in the future (probably include this [cmake folder](https://github.com/libsndfile/libsndfile/tree/master/cmake))

Example:

```
g++ output.cpp -lsndfile
```

## Goals

1. Worst case: Show the AST generated by ANTLR with the Synthtax grammar, and show how sound can be generated with `RTAudio` library
2. Expected: The program can produce C++ code and link with the Synthtax built-in C++ code, and it can generate sound
3. Stretch: Expand Synthtax capabilities such as adding arrays and user defined objects, and some digital processing concepts such as subtractive synthesis, frequency modulation, and getting MIDI input.

## Reference

1. [github.com/antlr/antlr4/tree/master/runtime/Cpp/cmake](https://github.com/antlr/antlr4/tree/master/runtime/Cpp/cmake): build files for many platforms

## Resources

1. [Antlr4 for C++ blog](https://beyondtheloop.dev/Antlr-cpp-cmake/)
2. [lab.antlr.org](http://lab.antlr.org/)
3. [Getting Started with ANTLR in C++](https://tomassetti.me/getting-started-antlr-cpp/)
4. [Demo application for the ANTLR4 C++ target](https://github.com/antlr/antlr4/tree/master/runtime/Cpp/demo)
5. [ANTLR Based Transpiler](https://github.com/ram-nad/ANTLR-Based-Transpiler)

## TODO

1. Implement ADSR class
2. Test with loop
3. Documentation
